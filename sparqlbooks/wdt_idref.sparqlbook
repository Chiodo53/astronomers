[
  {
    "kind": 2,
    "language": "sparql",
    "value": "### Number of persons \nPREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\n\nSELECT (COUNT(*) as ?n)\nWHERE {\n    GRAPH <https://github.com/Sciences-historiques-numeriques/astronomers/blob/main/graphs/wikidata-imported-data.md>\n        {?s a wd:Q5.}\n}\n",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "### Number of persons \nPREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\n\nSELECT ?s\nWHERE {\n    GRAPH <https://github.com/Sciences-historiques-numeriques/astronomers/blob/main/graphs/wikidata-imported-data.md>\n        {?s a wd:Q5.}\n}\nLIMIT 3\n",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "\n\n## Explorer les idref\n\nPREFIX franzOption_defaultDatasetBehavior: <franz:rdf>\nPREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX wikibase: <http://wikiba.se/ontology#>\nPREFIX bd: <http://www.bigdata.com/rdf#>\n\nSELECT ?item ?idRef\nWHERE\n    {\n\n         GRAPH <https://github.com/Sciences-historiques-numeriques/astronomers/blob/main/graphs/wikidata-imported-data.md>\n   \n        ## Find the persons in the imported graph\n        {SELECT ?item ?birthYear\n        WHERE \n                {?item a wd:Q5}\n        ORDER BY ?item      \n        OFFSET 0\n        #OFFSET 10000\n        #OFFSET 20000\n       LIMIT 1000\n\n        }\n        ## \n        SERVICE <https://query.wikidata.org/sparql>\n            {\n                ?item wdt:P269 ?idRefId.\n                BIND(URI(CONCAT('https://www.idref.fr/', ?idRefId)) as ?idRef)\n\n            }\n                \n        }\nORDER BY ?birthYear \nLIMIT 5\n",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "### Prepare the data to be imported\n# With LIMIT clause \n## Apparently labels are not repeated if already available\n# We therefore car integrate them directly in the INSERT below\n\nPREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX wikibase: <http://wikiba.se/ontology#>\nPREFIX bd: <http://www.bigdata.com/rdf#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\n\nCONSTRUCT {?item wdt:P269 ?idRef.}\nWHERE\n    {\n        ## Find the persons in the imported graph\n        {SELECT ?item\n        WHERE \n                {?item a wd:Q5.}\n        ORDER BY ?item      \n        OFFSET 0\n        #OFFSET 10000\n        #OFFSET 20000\n        LIMIT 10\n\n        }\n        ## \n        SERVICE <https://query.wikidata.org/sparql>\n            {\n                # IdRef\n                ?item wdt:P269 ?idRefId.\n                BIND(URI(CONCAT('https://www.idref.fr/', ?idRefId)) as ?idRef)\n\n            }\n                \n        }",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "### Prepare the data to be imported\n# With LIMIT clause \n## Apparently labels are not repeated if already available\n# We therefore car integrate them directly in the INSERT below\n\nPREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX wikibase: <http://wikiba.se/ontology#>\nPREFIX bd: <http://www.bigdata.com/rdf#>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\n\nWITH <https://github.com/Sciences-historiques-numeriques/astronomers/blob/main/graphs/wikidata-imported-data.md>\nINSERT {?item wdt:P269 ?idRef.}\nWHERE\n    {\n        ## Find the persons in the imported graph\n        {SELECT ?item\n        WHERE \n                {?item a wd:Q5.}\n        ORDER BY ?item      \n        #OFFSET 10000\n        #OFFSET 20000\n        OFFSET 30000\n        LIMIT 10000\n\n        }\n        ## \n        SERVICE <https://query.wikidata.org/sparql>\n            {\n                # IdRef\n                ?item wdt:P269 ?idRefId.\n                BIND(URI(CONCAT('https://www.idref.fr/', ?idRefId)) as ?idRef)\n\n            }\n                \n        }",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "### Inspect imported information",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "### Basic query about number of persons per employers\n\nPREFIX franzOption_defaultDatasetBehavior: <franz:rdf>\nPREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\n\nSELECT (COUNT(*) as ?n)\nWHERE {\n    GRAPH <https://github.com/Sciences-historiques-numeriques/astronomers/blob/main/graphs/wikidata-imported-data.md>\n        { ?item wdt:P269 ?idRefId\n         }         \n}\n\n",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "### Insert the label of the property\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX wd: <http://www.wikidata.org/entity/>\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\n\n\nINSERT DATA {\n  GRAPH <https://github.com/Sciences-historiques-numeriques/astronomers/blob/main/graphs/wikidata-imported-data.md>\n  {wdt:P269 rdfs:label 'same as IdRef'.}\n}",
    "metadata": {}
  },
  {
    "kind": 1,
    "language": "markdown",
    "value": "## Explore IdRef available information",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "\n  PREFIX wdt: <http://www.wikidata.org/prop/direct/>\n  PREFIX owl: <http://www.w3.org/2002/07/owl#>\n  PREFIX wd: <http://www.wikidata.org/entity/>\n\n  SELECT ?idRef\n  WHERE {  \n    { SELECT DISTINCT ?idRef\n      WHERE {\n          GRAPH <https://github.com/Sciences-historiques-numeriques/astronomers/blob/main/graphs/wikidata-imported-data.md>\n        { ?item wdt:P269 ?idRef\n        }                   \n      }\n      LIMIT 5\n    }\n  }\n\n      ",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX wd: <http://www.wikidata.org/entity/>\n\nSELECT ?s ?p\nWHERE {  \n  { SELECT DISTINCT ?idRef\n    WHERE {\n        GRAPH <https://github.com/Sciences-historiques-numeriques/astronomers/blob/main/graphs/wikidata-imported-data.md>\n      { ?item wdt:P269 ?idRef\n      }                   \n    }\n    LIMIT 10\n  }\n  SERVICE <https://data.idref.fr/sparql> {\n    ?s ?p ?idRef.\n  }\n}\n",
    "metadata": {}
  },
  {
    "kind": 2,
    "language": "sparql",
    "value": "\nPREFIX wdt: <http://www.wikidata.org/prop/direct/>\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX wd: <http://www.wikidata.org/entity/>\n\nSELECT ?p (count(*) as ?eff)\nWHERE {  \n  { SELECT DISTINCT ?idRef\n    WHERE {\n        GRAPH <https://github.com/Sciences-historiques-numeriques/astronomers/blob/main/graphs/wikidata-imported-data.md>\n      { ?item wdt:P269 ?idRef\n      }                   \n    }\n    LIMIT 1000\n  }\n  SERVICE <https://data.idref.fr/sparql> {\n    ?s ?p ?idRef.\n  }\n}\nGROUP BY ?p\nORDER BY DESC(?eff)",
    "metadata": {}
  }
]